{% extends "base.html" %}
{% block title %}Subject Management - Princess's Website{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/subjects.css') }}">
{% endblock %}
{% block content %}
  <div class="welcome-section">
    <h1>Subject Management</h1>
    <p class="tagline">Organize your flashcards and quizzes into subjects</p>
  </div>

  <div class="subjects-container">
    <div class="card add-subject-card">
      <h3><i class="fas fa-plus-circle"></i> Add New Subject</h3>
      <form action="{{ url_for('add_subject') }}" method="POST" class="add-subject-form">
        <div class="form-group">
          <label for="subjectName">Subject Name</label>
          <input type="text" name="subjectName" id="subjectName" placeholder="Enter subject name" required>
        </div>
        <button type="submit" class="btn add-btn">
          <i class="fas fa-plus"></i> Add Subject
        </button>
      </form>
    </div>

    <h2 class="section-title"><i class="fas fa-book"></i> Your Subjects</h2>
    
    {% if subjects %}
      <div class="subjects-grid">
        {% for subject in subjects %}
          <div class="subject-card">
            <div class="subject-header">
              <h3>{{ subject.name }}</h3>
              <span class="topic-count">{{ subject.topics|length }} Topics</span>
            </div>
            <div class="subject-actions">
              <a href="{{ url_for('view_subject', subject_id=subject.id) }}" class="btn view-btn">
                <i class="fas fa-eye"></i> View Topics
              </a>
              <form action="{{ url_for('delete_subject', subject_id=subject.id) }}" method="POST" class="delete-form" onsubmit="return confirm('Are you sure you want to delete this subject? All topics and flashcards will be deleted.')">
                <button type="submit" class="btn delete-btn">
                  <i class="fas fa-trash-alt"></i> Delete
                </button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-folder-open"></i>
        </div>
        <p>You don't have any subjects yet. Create one to get started!</p>
      </div>
    {% endif %}
  </div>

  <div class="button-row">
    <a href="{{ url_for('dashboard') }}" class="btn back-btn">
      <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
  </div>

  <script>
    // Form animation
    document.addEventListener('DOMContentLoaded', function() {
      const formElements = document.querySelectorAll('.form-group');
      formElements.forEach((element, index) => {
        setTimeout(() => {
          element.classList.add('animated');
        }, 100 * index);
      });
      
      // Add animation to subject cards
      const subjectCards = document.querySelectorAll('.subject-card');
      subjectCards.forEach((card, index) => {
        setTimeout(() => {
          card.classList.add('animated');
        }, 100 * index);
      });
    });
  </script>
{% endblock %} 