<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Princess's Website{% endblock %}</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Main CSS for global layout -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  {% block extra_css %}{% endblock %}
</head>
<body>
  {% if request.path == '/dashboard' %}
  <header class="main-header">
    <div class="logo-container">
      <i class="fas fa-crown crown-icon"></i>
      <h2>Princess</h2>
    </div>
    <button class="mobile-menu-btn" aria-label="Toggle menu">
      <i class="fas fa-bars"></i>
    </button>
    <nav class="top-nav">
      <a href="{{ url_for('dashboard') }}" class="nav-item"><i class="fas fa-home"></i> Home</a>
      <a href="{{ url_for('subjects') }}" class="nav-item"><i class="fas fa-book"></i> Subjects</a>
    </nav>
  </header>
  {% else %}
  <div class="page-logo">
    <a href="{{ url_for('dashboard') }}" class="logo-link">
      <i class="fas fa-crown crown-icon-small"></i>
      <h2>Princess</h2>
    </a>
  </div>
  {% endif %}

  <main class="main-content">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash-message {{ category }}">
              {{ message }}
              <button class="close-btn" onclick="this.parentElement.style.display='none';">&times;</button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    
    {% block content %}{% endblock %}
  </main>

  {% if request.path == '/dashboard' %}
  <footer class="footer">
    <p>Made with <i class="fas fa-heart"></i> | Â© Princess's Website</p>
  </footer>
  {% endif %}

  <script>
    // Add interactive effects
    document.addEventListener('DOMContentLoaded', function() {
      // Toggle mobile menu
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      const topNav = document.querySelector('.top-nav');
      
      if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', function() {
          topNav.classList.toggle('active');
          const icon = mobileMenuBtn.querySelector('i');
          if (topNav.classList.contains('active')) {
            icon.className = 'fas fa-times';
          } else {
            icon.className = 'fas fa-bars';
          }
        });
      }
      
      // Add hover animation to buttons
      const buttons = document.querySelectorAll('button, .btn, .nav-item');
      buttons.forEach(button => {
        button.addEventListener('mouseover', function() {
          this.style.transform = 'translateY(-3px)';
          this.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.1)';
        });
        button.addEventListener('mouseout', function() {
          this.style.transform = '';
          this.style.boxShadow = '';
        });
      });
      
      // Fade in content with sparkle effect
      const content = document.querySelector('.main-content');
      content.style.opacity = '0';
      setTimeout(() => {
        content.style.transition = 'opacity 0.8s ease';
        content.style.opacity = '1';
        
        // Add sparkling effect
        createSparkles();
      }, 100);
      
      // Create sparkles function
      function createSparkles() {
        const mainContent = document.querySelector('.main-content');
        for (let i = 0; i < 15; i++) {
          const sparkle = document.createElement('div');
          sparkle.className = 'sparkle';
          sparkle.style.left = Math.random() * 100 + '%';
          sparkle.style.top = Math.random() * 100 + '%';
          sparkle.style.animationDelay = Math.random() * 5 + 's';
          mainContent.appendChild(sparkle);
        }
      }
    });
  </script>
</body>
</html>
